<html>
<head>
<meta charset='UTF-8' >
</head>
<body onLoad='javascript:draw()' >
	<textarea id='jsonData' rows="20" cols="40"  onChange='javascript:dataChange(this)' >
	{ 
	 "message": "OK" , 
	 "chartType": "sBar" , 
	 "data": [
	     { "x": "1", "color": 1},
	     { "x": "2", "color": 2},
	     { "x": "3", "color": 3},
	     { "x": "4", "color": 4},
	     { "x": "5", "color": 5},
	     { "x": "6", "color": 6},
	     { "x": "7", "color": 7}
	  ] 
	 } 
	</textarea>
	<input type='button' value='refresh' onClick='javascript:draw()'  />
	<svg id='chart' width="600" height="200">
	</svg>
	<script>
	  function draw() {
           var jd;
	   try {
           jd = JSON.parse(document.getElementById('jsonData').innerHTML);
           var svgFragment="";
           var x=0;
	   var color="";
           for (var i=0 ; i< jd.data.length; i++ ) {
	      switch ( jd.data[i].color ) {
		case 1:
		  color='169, 169, 169';
	          break;
	        case 2:
		  color='255, 140, 0';
	          break;
	        case 3:
		  color='255, 0, 0';
	          break;
	        case 4:
		  color='255, 255, 0';
	          break;
	        case 5:
		  color='0, 0, 255';
	          break;
	        case 6:
		  color='128, 0, 128';
	          break;
	        case 7:
		  color='34, 139, 34';
	          break;
	        default:
	          color='0,0,0';
	      }
                  svgFragment=svgFragment+"<rect x="+(i*21)+" y=0 width=20 height=20 style='fill:rgb("+color+")' />";
	    }
            document.getElementById('chart').innerHTML=svgFragment;
	   } catch (err) {
	     alert(err);
	   }
	  }
         function dataChange(d) {
           document.getElementById('jsonData').innerHTML=d.value;
         }
	</script>
	</body>
</html>
